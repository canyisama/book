{%extend name='public/header' /%}
{%block name='head'%}
{__block__}
<link href="__static__/css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">

<script src="__static__/js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
<script src="__static__/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="__static__/js/indexpage.js"></script>
{%/block%}

{%block name='content_user'%}
{__block__}

<div>
    <table id="Table">
        <thead>
        <tr>
            <th data-field="tsg_code" data-sortable="true">预借分馆</th>
            <th data-field="title" data-formatter="titleOp" data-sortable="true">书名</th>
            <th data-field="barcode" data-sortable="true">图书条码</th>
            <th data-field="site_name" data-sortable="true">馆藏地址</th>
            <th data-field="lend_reser_status" data-formatter="stateFormatter" data-sortable="true">预借状态</th>
            <th data-field="lend_reser_time" data-sortable="true">预借日期</th>
        </tr>
        </thead>
    </table>
</div>
{%/block%}

{%block name='js'%}
{__block__}

<script src="__static__/js/logic/opac/table.js" ></script>

<script>
    var source = 'lend_reser_history';
    var sort_name = 'lend_reser_time';

    /**
     * 格式"预订批次状态"列
     * @param value
     * @returns {string}
     */
    function stateFormatter(value) {
        switch (value) {
            case 1:
                return '<span class="label label-primary">预借中</span>';
            case 2:
                return '<span class="label label-danger">超时</span>';
            case 3:
                return '<span class="label label-default">取消预借</span>';
            case 4:
                return '<span class="label label-success">已取书</span>';
        }
    }
</script>


{%/block%}